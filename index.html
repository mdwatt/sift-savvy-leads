<!doctype html>
<html lang="en">
<head>
  <!-- Reddit Pixel: place high in <head> -->
  <script>
  !function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];
  var t=d.createElement("script");t.src="https://www.redditstatic.com/ads/pixel.js";t.async=!0;
  var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(window,document);
  rdt('init','a2_hcf7enfw17xs');
  rdt('track','PageVisit');
  </script>
  <!-- End Reddit Pixel -->

  <!-- Google Ads tag -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-987325341"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-987325341');
  </script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="index,follow">
  <title>Stop Wasting Hours Hunting for Real Leads | Sift Savvy</title>
  <meta name="description" content="Sift Savvy turns your overflowing inbox into a filtered lead pipeline — automatically parsing, scoring, and surfacing real leads so you don’t waste time sorting noise. Start free for 3 extractions/month.">
  <meta name="keywords" content="Extract Leads, email leads, AI lead extraction, inbox automation, lead management, sales leads, recruiter inbox, solopreneur CRM" />

  <!-- Open Graph -->
  <meta property="og:title" content="Sift Savvy: AI-Powered Inbox Lead Extraction" />
  <meta property="og:description" content="Stop wasting hours hunting for real leads. Filter, score, and surface qualified opportunities from your email in seconds." />
  <meta property="og:image" content="https://leads.siftsavvy.com/thumbnail.jpg" />
  <meta property="og:url" content="https://leads.siftsavvy.com" />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Sift Savvy — AI-Powered Inbox Relief">
  <meta name="twitter:description" content="Turn inbox chaos into qualified leads. Start free — 3 extractions/month.">
  <meta name="twitter:image" content="https://leads.siftsavvy.com/thumbnail.jpg">

  <!-- Referrer / CSP -->
  <meta name="referrer" content="no-referrer">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self' https://www.googletagmanager.com https://www.google-analytics.com;
    script-src  'self' https://www.googletagmanager.com 'unsafe-inline';
    style-src   'self' 'unsafe-inline';
    img-src     'self' data: https://www.googletagmanager.com https://www.google-analytics.com;
    connect-src 'self' https://www.googletagmanager.com https://www.google-analytics.com;
    frame-ancestors 'self';
    base-uri 'self';
    form-action 'self';
    object-src 'none';
    upgrade-insecure-requests;
    navigate-to 'self' https://siftsavvy.com;">
  <meta http-equiv="Permissions-Policy" content="browsing-topics=(), interest-cohort=()">

  <link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BCWBVWLCFG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BCWBVWLCFG', { send_page_view: true });
    function track(eventName, params={}) { if (!window.gtag) return; gtag('event', eventName, params); }
  </script>

  <style>
    :root{
      --bg:#ffffff; --card:#ffffff; --text:#0b0d10; --muted:#4b5563;
      --accent:#4da3ff; --accent-2:#6cffc3; --border:#e5e7eb; --header-bg:#ffffff;
      --btn-dark:#1a212b; --overlay: rgba(11,13,16,.6);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Apple Color Emoji','Segoe UI Emoji'}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:1140px;margin:0 auto;padding:16px 24px}

    .site-header{position:sticky; top:0; z-index:1000;background:var(--header-bg);border-bottom:1px solid var(--border);box-shadow:0 4px 12px rgba(0,0,0,.05);backdrop-filter:saturate(180%) blur(8px);}
    .nav{display:flex;justify-content:space-between;align-items:center;padding:10px 0}
    .brand{display:flex;gap:10px;align-items:center}
    .logo-img{height:28px;display:block;border-radius:6px}
    .badge{font-size:12px;border:1px solid var(--border);padding:4px 8px;border-radius:999px;color:var(--muted)}

    .hero{display:grid;grid-template-columns:1.1fr 1fr;gap:36px;align-items:start;padding:32px 0}
    .eyebrow{display:inline-block;font-size:12px;letter-spacing:.08em;text-transform:uppercase;color:var(--muted);border:1px solid var(--border);padding:4px 10px;border-radius:999px;margin-bottom:10px}
    .hero-left .eyebrow{background:#f8fafc}
    .hero-right .eyebrow{background:#f0f9ff}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px}
    h1{font-size:40px;line-height:1.1;margin:0 0 12px}
    h2{font-size:28px;margin:24px 0 12px}
    p{color:var(--text);opacity:.95}
    .muted{color:var(--muted)}
    .kpis{display:flex;gap:16px;flex-wrap:wrap;margin-top:18px}
    .kpi{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:12px 16px}
    .cta{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap}
    .btn{display:inline-block;padding:12px 18px;border-radius:10px;border:1px solid var(--border);font-weight:600;cursor:pointer}
    .btn-primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#0b0d10;border:none}
    .btn-ghost{background:transparent;color:var(--text)}
    .btn-dark{background:var(--btn-dark);border-color:var(--btn-dark);color:#fff}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--border);border-radius:999px;color:var(--muted);font-size:12px}
    .list{display:flex;flex-direction:column;gap:8px}
    .score{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:8px;background:#f7f9fc;border:1px solid var(--border)}
    .score.ok{border-color:#cfe9d7}
    .section{padding:28px 0}
    .footer{padding:28px 0;color:var(--muted);border-top:1px solid var(--border);margin-top:24px}
    .hero-right{display:flex;flex-direction:column;gap:12px}
    .video-box{position:relative;width:100%;aspect-ratio:16/9;border-radius:16px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.12);border:1px solid var(--border);background:#000}
    .video-box video{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    #backToTop{position:fixed;right:calc(24px + env(safe-area-inset-right));bottom:calc(24px + env(safe-area-inset-bottom));display:none;z-index:1200;padding:10px 14px;border-radius:999px;box-shadow:0 8px 20px rgba(0,0,0,.15)}
    .quote{font-style:italic; line-height:1.5}
    .byline{margin-top:10px; color:var(--muted); font-size:14px}

    /* === RESTORED: Fake Door Modal CSS (hidden by default) === */
    .fd-overlay{position:fixed; inset:0; background:var(--overlay); display:none; align-items:center; justify-content:center; z-index:2000; padding:24px;}
    .fd-modal{width:min(680px, 96vw); background:#fff; color:#0b0d10; border-radius:16px; border:1px solid #e5e7eb; box-shadow:0 30px 80px rgba(0,0,0,.25); overflow:hidden;}
    .fd-head{padding:18px 20px; border-bottom:1px solid #e5e7eb; display:flex; align-items:center; justify-content:space-between;}
    .fd-title{font-size:18px; font-weight:700}
    .fd-close{border:none; background:transparent; font-size:22px; cursor:pointer; line-height:1}
    .fd-body{padding:20px}
    .fd-note{color:#4b5563; margin-top:8px}
    .fd-cta{display:flex; gap:10px; flex-wrap:wrap; margin-top:18px}
    .fd-btn{padding:10px 14px; border-radius:10px; border:1px solid #e5e7eb; background:#111418; color:#fff; cursor:pointer; font-weight:600}
    .fd-btn.secondary{background:#fff; color:#0b0d10}
    .fd-small{font-size:12px; color:#6b7280}
    .fd-bullet{margin:0; padding-left:18px; color:#111827}
    .fd-bullet li{margin:6px 0}

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .result-pill{display:inline-flex;gap:8px;align-items:center;padding:8px 12px;border:1px solid var(--border);border-radius:8px;background:#fff;font-size:14px;margin:4px 0}
    .result-pill strong{color:var(--text)}
    .urgency-high{background:#fee;border-color:#fcc;color:#c00}
    .urgency-medium{background:#fef3cd;border-color:#ffc107;color:#856404}
    .urgency-low{background:#e8f5e9;border-color:#4caf50;color:#2e7d32}
    .score-badge{display:inline-block;padding:4px 10px;border-radius:6px;background:#4da3ff;color:#fff;font-weight:600;font-size:13px}

    @media (max-width:1024px){
      .hero{grid-template-columns:1fr; gap:18px}
      .grid-4{grid-template-columns:repeat(2,1fr)}
    }
    @media (max-width:640px){
      .grid-4{grid-template-columns:1fr}
    }
  </style>
</head>
<body id="top">
  <header class="site-header">
    <div class="wrap nav">
      <div class="brand">
        <a id="cta_logo" data-new-window="1" href="https://siftsavvy.com" rel="noopener noreferrer nofollow" referrerpolicy="no-referrer">
          <img class="logo-img" src="/siftsavvy-logo.png" alt="Sift Savvy">
        </a>
        <span class="badge">Micro-SaaS</span>
      </div>
      <div class="badge">Try free: 3 extractions/month</div>
    </div>
  </header>

  <div class="wrap">
    <!-- Variant A HERO (unchanged) -->
    <section class="hero">
      <div class="hero-left">
        <div class="eyebrow">AI-Powered Lead Extraction</div>
        <h1>Never Miss a Sales Opportunity Buried in Your Inbox</h1>
        <p class="muted" style="margin-top:6px;">Whether you're a solopreneur, small business owner, freelancer, marketer, recruiter, or entrepreneur, <strong>Sift Savvy</strong> helps you uncover urgent leads buried in your inbox—so you never miss a sales opportunity again.</p>
        <p class="muted"><strong>Powerful Features.</strong> Everything you need to identify, score, and convert potential customers from your email communications.</p>
        <div class="kpis">
          <div class="kpi"><strong>5+ hours saved weekly</strong><br><span class="muted">average user time reclaimed</span></div>
          <div class="kpi"><strong>Instant CSV-Excel export</strong><br><span class="muted">clean data for outreach</span></div>
        </div>
        <div class="cta">
          <a class="btn btn-primary" id="cta_try" data-new-window="1" href="https://siftsavvy.com" rel="noopener noreferrer nofollow" referrerpolicy="no-referrer">Start Free — 3 Extractions/Month</a>
          <a class="btn btn-ghost" href="#how" id="cta_how">See How It Works</a>
        </div>
        <div style="margin-top:12px" class="muted">
          No card needed. No integrations to start.<br><br>
          <a href="https://www.producthunt.com/products/sift-savvy?embed=true&utm_source=badge-featured&utm_medium=badge&utm_source=badge-sift-savvy"
             target="_blank" rel="noopener noreferrer" aria-label="Find us on Product Hunt">
            <img src="assets/product-hunt-button.png" alt="Sift Savvy on Product Hunt" width="250" height="54" style="width:250px;height:54px;display:inline-block;border:0;">
          </a>
        </div>
      </div>

      <div class="hero-right">
        <div class="eyebrow">Watch 1-min demo</div>
        <div class="video-box" aria-label="Sift Savvy — emails transforming into structured leads">
          <video autoplay muted playsinline loop preload="none" poster="/assets/hero-poster.png">
            <source src="/assets/Sift Savvy - Lead Extraction Platform Demo.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>

        <div class="card" aria-labelledby="example_email_output">
          <h2 id="example_email_output" style="margin-top:0">One Email → One Qualified Lead</h2>
          <div class="list">
            <div class="pill">Contact: <strong>Jane Smith</strong> • jane@acme.co</div>
            <div class="pill">Company: <strong>Acme Logistics</strong></div>
            <div class="pill">Intent: <strong>“Website revamp & PPC — budget approved.”</strong></div>
            <div class="score ok">Priority (Pro): <strong>High</strong> — respond today</div>
          </div>
          <div class="cta" style="margin-top:16px">
            <a class="btn btn-dark" id="cta_run_first" data-new-window="1" href="https://siftsavvy.com" rel="noopener noreferrer nofollow" referrerpolicy="no-referrer">Run My First Extraction</a>
          </div>
          <p class="muted" style="margin-top:8px">CSV export included. Newsletters/promos auto-ignored.</p>
        </div>
      </div>
    </section>

    <section class="section" id="try-demo">
      <h2>Try It Now — Extract Leads with AI</h2>
      <div class="card" style="max-width:800px;margin:0 auto">
        <p style="margin-top:0"><strong>Test lead extraction in real-time.</strong> Paste an email below and see how AI extracts contact info, company details, and urgency levels.</p>
        <p class="muted">Personal emails, newsletters, and spam are automatically filtered out. You have <strong id="attempts-remaining">3 free attempts</strong> to test.</p>
        
        <div style="margin-top:20px">
          <label for="email-content" style="display:block;margin-bottom:8px;font-weight:600">Email Content</label>
          <textarea 
            id="email-content" 
            placeholder="Paste email content here for lead extraction...&#10;&#10;Example:&#10;Hi, I'm Sarah from Acme Corp. We're looking for a web developer to revamp our company website. Budget is $10k and we'd like to start next week. Can you help?&#10;&#10;Sarah Johnson&#10;Head of Marketing&#10;sarah@acmecorp.com&#10;555-123-4567"
            style="width:100%;min-height:180px;padding:12px;border:1px solid var(--border);border-radius:8px;font-family:inherit;font-size:14px;resize:vertical"
            maxlength="2000"
          ></textarea>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
            <span class="muted" style="font-size:13px">Processing time: ~2-3 seconds per lead</span>
            <span class="muted" style="font-size:13px" id="char-count">Characters: 0/2000</span>
          </div>
        </div>

        <div class="cta" style="margin-top:16px">
          <button class="btn btn-primary" id="extract-btn" onclick="extractLead()">Extract Lead</button>
          <button class="btn btn-ghost" id="clear-btn" onclick="clearForm()">Clear</button>
        </div>

        <div id="extraction-result" style="display:none;margin-top:24px;padding:20px;background:#f8fafc;border:1px solid var(--border);border-radius:12px">
          <div id="result-content"></div>
        </div>

        <div id="loading-indicator" style="display:none;margin-top:20px;text-align:center;padding:20px">
          <div style="display:inline-block;width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid var(--accent);border-radius:50%;animation:spin 1s linear infinite"></div>
          <p class="muted" style="margin-top:12px">Analyzing email content...</p>
        </div>
      </div>
    </section>

    <section id="how" class="section">
      <h2>How it works</h2>
      <div class="grid-3">
        <div class="card">
          <strong>1) Paste or upload</strong>
          <p class="muted">Drop email text or a file. We process subject + body only.</p>
        </div>
        <div class="card">
          <strong>2) Extract only what matters</strong>
          <p class="muted">Contact, company, request, brief context. <em>Pro</em> adds AI urgency detection.</p>
        </div>
        <div class="card">
          <strong>3) Export & act</strong>
          <p class="muted">One-click CSV. Prioritize (Pro) and start outreach immediately.</p>
        </div>
      </div>
    </section>

    <section class="section" id="community">
      <h2>Join Our Growing Community</h2>
      <div class="card" style="text-align:center;padding:32px 24px">
        <p style="font-size:18px;margin-bottom:20px"><strong>See what people are saying about Sift Savvy on Product Hunt</strong></p>
        <p class="muted" style="margin-bottom:24px">Join solopreneurs, freelancers, and small business owners who are already saving hours every week with AI-powered lead extraction.</p>
        <div class="cta" style="justify-content:center">
          <a class="btn btn-ghost" href="https://www.producthunt.com/products/sift-savvy" target="_blank" rel="noopener noreferrer">View Community Feedback →</a>
        </div>
      </div>
    </section>

    <section class="section" id="final-cta" style="padding:48px 0">
      <div class="card" style="text-align:center;padding:48px 24px;background:linear-gradient(135deg,#f8fafc 0%,#e8f5e9 100%);border:2px solid var(--accent)">
        <h2 style="font-size:36px;margin:0 0 16px">Ready to Stop Missing Leads?</h2>
        <p style="font-size:18px;margin-bottom:32px;color:var(--text)">Start extracting qualified leads from your inbox today. No credit card required.</p>
        <div class="cta" style="justify-content:center">
          <a class="btn btn-primary" id="cta_final" data-new-window="1" href="https://siftsavvy.com" rel="noopener noreferrer nofollow" referrerpolicy="no-referrer" style="font-size:18px;padding:16px 32px">Go to Main App →</a>
        </div>
        <p class="muted" style="margin-top:16px;font-size:14px">Free tier: 3 extractions per month • No integrations needed to start</p>
      </div>
    </section>
  </div>

  <footer class="footer">
    <div class="wrap">
      <div>© <span id="y"></span> Sift Savvy.
        <a href="https://siftsavvy.com" id="cta_main_nav" data-new-window="1" rel="noopener noreferrer nofollow" referrerpolicy="no-referrer">Main app</a> •
        <a href="#"
           onclick="alert('Privacy: We process text you submit for extraction. No resale of your data. Contact: support@siftsavvy.com'); track('privacy_view'); return false;">
           Privacy</a>
      </div>
    </div>
  </footer>

  <button id="backToTop" class="btn btn-dark" aria-label="Back to top" title="Back to top">↑ Top</button>

  <!-- Early Access (Fake Door) -->
  <div class="fd-overlay" id="fd_overlay" role="dialog" aria-modal="true" aria-labelledby="fd_title" aria-hidden="true">
    <div class="fd-modal">
      <div class="fd-head">
        <div class="fd-title" id="fd_title">Early Access — Limited Capacity</div>
        <button class="fd-close" id="fd_close" aria-label="Close">×</button>
      </div>
      <div class="fd-body">
        <p><strong>We’re currently onboarding in small batches.</strong> We can manually onboard <strong>5 users this week</strong> with white-glove setup.</p>
        <p class="fd-note">No calls required. Pick an option below to keep moving:</p>
        <ul class="fd-bullet">
          <li><strong>Watch a 1-minute demo</strong> to see exactly how it works.</li>
          <li><strong>Request Early Access</strong> and we’ll set you up manually.</li>
        </ul>

        <div class="fd-cta">
          <a class="fd-btn" id="fd_demo" href="/assets/Sift Savvy - Lead Extraction Platform Demo.mp4" target="_blank" rel="noopener">Watch 1-min Demo</a>
          <a class="fd-btn secondary" id="fd_request"
             href="mailto:support@siftsavvy.com?subject=Early%20Access%20Request&body=Hi%20Sift%20Savvy%20team%2C%0A%0AI'd%20like%20early%20access.%20My%20use%20case%3A%20%5Bbriefly%5D.%20Volume%2Fweek%3A%20%5Bxx%5D.%0A%0AThanks!">Request Early Access</a>
          <button class="fd-btn secondary" id="fd_continue">Continue to Dashboard</button>
        </div>
        <div class="fd-small" style="margin-top:10px">This helps us validate demand and prioritize features. Thanks for the signal.</div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const map = [
      { id: 'cta_logo', name: 'nav_click', label: 'logo' },
      { id: 'cta_try', name: 'begin_trial_click', label: 'hero_try_free' },
      { id: 'cta_how', name: 'nav_click', label: 'see_how' },
      { id: 'cta_run_first', name: 'begin_trial_click', label: 'card_run_first' },
      { id: 'cta_main_nav', name: 'nav_click', label: 'main_app' },
      { id: 'cta_final', name: 'begin_trial_click', label: 'final_cta' },
    ];
    map.forEach(({id,name,label})=>{
      const el = document.getElementById(id);
      if(!el) return;
      el.addEventListener('click', () => track(name, { label, page_location: window.location.href }));
    });

    (function(){
      const params = new URLSearchParams(window.location.search);
      const hasUTM = ['utm_source','utm_medium','utm_campaign'].some(k=>params.has(k));
      if(hasUTM){ track('landing_utm_hit', Object.fromEntries(params.entries())); }

      const seen = new WeakSet();
      new MutationObserver(() => {
        for (const {id,name,label} of map){
          const el = document.getElementById(id);
          if (el && !seen.has(el)){
            el.addEventListener('click', () => track(name, { label, page_location: window.location.href }));
            seen.add(el);
          }
        }
      }).observe(document.documentElement, { childList:true, subtree:true });
    })();

    // Fake door intercept
    (function fakeDoor(){
      const overlay = document.getElementById('fd_overlay');
      const closeBtn = document.getElementById('fd_close');
      const demoBtn  = document.getElementById('fd_demo');
      const reqBtn   = document.getElementById('fd_request');
      const contBtn  = document.getElementById('fd_continue');

      const body = document.body;
      function openFD(){
        overlay.style.display = 'flex';
        overlay.setAttribute('aria-hidden', 'false');
        body.style.overflow = 'hidden';
        track('fake_door_show');
      }
      function closeFD(){
        overlay.style.display = 'none';
        overlay.setAttribute('aria-hidden', 'true');
        body.style.overflow = '';
      }
      closeBtn.addEventListener('click', closeFD);
      overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeFD(); });

      demoBtn.addEventListener('click', ()=> track('fake_door_demo_click'));
      reqBtn.addEventListener('click',  ()=> track('fake_door_request_access'));

      ['cta_try','cta_run_first'].forEach(id=>{
        const el = document.getElementById(id);
        if(!el) return;
        el.addEventListener('click', function(e){
          e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
          openFD();
        }, { capture:true });
      });

      contBtn.addEventListener('click', ()=>{
        closeFD();
        track('fake_door_continue');
        window.open('https://siftsavvy.com', 'siftsavvy_cta_win');
      });
    })();

    // Single-window open (respects fake door)
    (function forceRealWindowForCTAs(){
      document.querySelectorAll('[data-new-window="1"]').forEach(a => a.removeAttribute('target'));
      function centerSpecs(w=1100, h=820){
        try{
          const aw = window.screen.availWidth || window.innerWidth || 1280;
          const ah = window.screen.availHeight || window.innerHeight || 800;
          const left = Math.max(0, Math.floor((aw - w) / 2));
          const top  = Math.max(0, Math.floor((ah - h) / 2));
          return `width=${w},height=${h},left=${left},top=${top}`;
        }catch(_e){ return `width=1100,height=820`; }
      }
      function handlerFactory(el){
        return function(e){
          if (document.getElementById('fd_overlay').style.display === 'flex') return;
          e.preventDefault(); e.stopPropagation(); e.stopImmediatePropagation();
          try{ el.removeAttribute('target'); }catch(_e){}
          const href = el.getAttribute('href'); if(!href) return;
          const name = 'siftsavvy_cta_win';
          const win = window.open(href, name, centerSpecs());
          if (win && typeof win.focus === 'function') win.focus();
        }
      }
      function enhance(id){
        const el = document.getElementById(id);
        if(!el) return;
        const handler = handlerFactory(el);
        el.addEventListener('click', handler, { capture:true });
        el.addEventListener('auxclick', handler, { capture:true });
      }
      ['cta_logo','cta_try','cta_run_first','cta_main_nav','cta_final'].forEach(enhance);
    })();

    (function backToTop(){
      const btn = document.getElementById('backToTop');
      const showAfter = 600;
      function toggle(){ btn.style.display = (window.scrollY > showAfter) ? 'inline-flex' : 'none'; }
      window.addEventListener('scroll', toggle, { passive:true });
      window.addEventListener('load', toggle);
      btn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    })();

    const ATTEMPTS_KEY = 'siftsavvy_attempts';
    const MAX_ATTEMPTS = 3;

    function getAttempts() {
      const stored = localStorage.getItem(ATTEMPTS_KEY);
      return stored ? parseInt(stored, 10) : 0;
    }

    function setAttempts(count) {
      localStorage.setItem(ATTEMPTS_KEY, count.toString());
    }

    function updateAttemptsUI() {
      const attempts = getAttempts();
      const remaining = Math.max(0, MAX_ATTEMPTS - attempts);
      document.getElementById('attempts-remaining').textContent = `${remaining} free attempt${remaining !== 1 ? 's' : ''}`;
      
      const extractBtn = document.getElementById('extract-btn');
      if (remaining === 0) {
        extractBtn.disabled = true;
        extractBtn.style.opacity = '0.5';
        extractBtn.style.cursor = 'not-allowed';
        extractBtn.textContent = 'No attempts remaining';
      }
    }

    function updateCharCount() {
      const textarea = document.getElementById('email-content');
      const count = textarea.value.length;
      document.getElementById('char-count').textContent = `Characters: ${count}/2000`;
    }

    document.getElementById('email-content').addEventListener('input', updateCharCount);

    function clearForm() {
      document.getElementById('email-content').value = '';
      updateCharCount();
      document.getElementById('extraction-result').style.display = 'none';
    }

    async function extractLead() {
      const attempts = getAttempts();
      if (attempts >= MAX_ATTEMPTS) {
        alert('You have used all 3 free attempts. Sign up for unlimited extractions!');
        return;
      }

      const content = document.getElementById('email-content').value.trim();
      if (!content) {
        alert('Please paste some email content to extract.');
        return;
      }

      const loadingEl = document.getElementById('loading-indicator');
      const resultEl = document.getElementById('extraction-result');
      const extractBtn = document.getElementById('extract-btn');

      extractBtn.disabled = true;
      loadingEl.style.display = 'block';
      resultEl.style.display = 'none';

      try {
        const response = await fetch('/api/extract', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ content })
        });

        const data = await response.json();

        if (!response.ok) {
          throw new Error(data.error || 'Failed to extract lead');
        }

        setAttempts(attempts + 1);
        updateAttemptsUI();

        displayResult(data);
        track('lead_extraction_success', { attempts: attempts + 1 });

      } catch (error) {
        console.error('Extraction error:', error);
        alert('Error processing your request. Please try again.');
        track('lead_extraction_error', { error: error.message });
      } finally {
        loadingEl.style.display = 'none';
        extractBtn.disabled = false;
      }
    }

    function displayResult(data) {
      const resultContent = document.getElementById('result-content');
      const resultEl = document.getElementById('extraction-result');

      if (data.is_valid_lead === 'no') {
        resultContent.innerHTML = `
          <div style="text-align:center;padding:20px">
            <div style="font-size:48px;margin-bottom:12px">🚫</div>
            <h3 style="margin:0 0 8px;color:var(--text)">Not a Business Lead</h3>
            <p class="muted">${data.reason || 'This appears to be a personal email, newsletter, or spam and was filtered out.'}</p>
            <p class="muted" style="margin-top:12px;font-size:13px">Try pasting a business inquiry email to see lead extraction in action.</p>
          </div>
        `;
      } else {
        const urgencyClass = data.urgency_level === 'High' ? 'urgency-high' : 
                            data.urgency_level === 'Medium' ? 'urgency-medium' : 'urgency-low';
        
        resultContent.innerHTML = `
          <div style="text-align:center;margin-bottom:20px">
            <div style="font-size:48px;margin-bottom:8px">✅</div>
            <h3 style="margin:0;color:var(--text)">Valid Business Lead Extracted!</h3>
          </div>
          <div style="display:flex;flex-direction:column;gap:12px">
            ${data.contact_name ? `<div class="result-pill"><strong>Contact:</strong> ${data.contact_name}</div>` : ''}
            ${data.email ? `<div class="result-pill"><strong>Email:</strong> ${data.email}</div>` : ''}
            ${data.phone ? `<div class="result-pill"><strong>Phone:</strong> ${data.phone}</div>` : ''}
            ${data.company ? `<div class="result-pill"><strong>Company:</strong> ${data.company}</div>` : ''}
            ${data.intent ? `<div class="result-pill"><strong>Intent:</strong> ${data.intent}</div>` : ''}
            ${data.urgency_level ? `<div class="result-pill ${urgencyClass}"><strong>Urgency:</strong> ${data.urgency_level}</div>` : ''}
            ${data.lead_score ? `<div class="result-pill"><strong>Lead Score:</strong> <span class="score-badge">${data.lead_score}/10</span></div>` : ''}
          </div>
          <div style="margin-top:20px;padding:16px;background:#e8f5e9;border-radius:8px;border:1px solid #4caf50">
            <p style="margin:0;font-size:14px;color:#2e7d32"><strong>💡 Pro Tip:</strong> This lead would be exported to CSV with all fields for easy follow-up!</p>
          </div>
        `;
      }

      resultEl.style.display = 'block';
      resultEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    updateAttemptsUI();
  </script>
</body>
</html>
